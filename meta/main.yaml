---
dependencies:
  - role: dehydrated
  - role: nginx
    when: 
      - groups.nginx is defined
      - (inventory_hostname in groups.nginx or not inventory_hostname in groups.apache)
  - role: apache
    when: 
      - groups.apache is defined
      - inventory_hostname in groups.apache
  - role: oauth2_proxy
    when: 
      - solr.oauth2_proxy is defined
      - solr.oauth2_proxy
  - role: supervisord
